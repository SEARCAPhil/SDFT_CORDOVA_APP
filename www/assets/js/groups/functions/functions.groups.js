!function(n){var o={};function a(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="./src/assets/js/groups/functions/functions.groups.js")}({"./src/assets/js/groups/functions/functions.groups.js":
/*!************************************************************!*\
  !*** ./src/assets/js/groups/functions/functions.groups.js ***!
  \************************************************************/
/*! no static exports found */function(module,exports){eval('function show_more_groups(e) {\n  if (window.sessionStorage.getItem(\'group_page\') == null) {\n    var nextPage = 1;\n    window.sessionStorage.setItem(\'group_page\', 1);\n  } else {\n    var nextPage = parseInt(window.sessionStorage.getItem(\'group_page\')) + 1;\n    window.sessionStorage.setItem(\'group_page\', nextPage);\n  }\n\n  console.log(this);\n  $(e).html(\'loading . . .\');\n  get_groups(\'page=\' + nextPage, function () {\n    $(e).parent().children(e).remove();\n  });\n}\n\nfunction show_more_groups_modal(e) {\n  if (window.sessionStorage.getItem(\'group_page\') == null) {\n    var nextPage = 1;\n    window.sessionStorage.setItem(\'group_page\', 1);\n  } else {\n    var nextPage = parseInt(window.sessionStorage.getItem(\'group_page\')) + 1;\n    window.sessionStorage.setItem(\'group_page\', nextPage);\n  }\n\n  console.log(this);\n  $(e).html(\'loading . . .\');\n  get_groups_modal(\'page=\' + nextPage, function () {\n    $(e).parent().children(e).remove();\n  });\n}\n\nfunction show_more_group_members(e) {\n  var html = \'\';\n  var page = $(e).attr(\'data-page\') == undefined ? 2 : parseInt($(e).attr(\'data-page\')) + 1;\n  var data_group = $(e).attr(\'data-group\') == undefined ? null : parseInt($(e).attr(\'data-group\')); //loading\n\n  $(e).html(\'loading. . .\');\n  $(e).attr(\'onclick\', null).off(\'click\');\n\n  __ajax_group_members(\'page=\' + page + \'&group=\' + data_group, function (json) {\n    var data = JSON.parse(json);\n    var members = typeof data.members != \'undefined\' ? data.members : []; //members\n\n    for (var y = 0; y < members.length; y++) {\n      html += "\\n\\n\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-12 groups phone-book group-members\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-1\\"><div class=\\"media-circles circle-sm\\"><img src=\\"assets/images/user.png\\" width=\\"100%;\\"></div></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-10\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<small style=\\"line-height: 10px;\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><b>" + members[y].name + "</b></p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + members[y].department + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + members[y].position + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><button class=\\"btn btn-danger btn-xs\\" data-membership-id=\\"" + members[y].id + "\\" onclick=\\"undelegate_group_member(event,this)\\"><i class=\\"material-icons\\">remove</i> remove</button></p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</small>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\n\\t\\t\\t\\t\\t";\n    } //show more group members\n\n\n    if (members.length > 0) html += "<div class=\\"text-center text-muted\\"  onclick=\\"show_more_group_members(this)\\" data-page=\\"" + page + "\\" data-group=\\"" + data_group + "\\">Show more</div>";\n    $(e).replaceWith(html);\n  }, function () {//failed\n  });\n}\n\nfunction show_more_contacts(e) {\n  if (window.sessionStorage.getItem(\'contacts_page\') == null) {\n    var nextPage = 2;\n    window.sessionStorage.setItem(\'contacts_page\', 2);\n  } else {\n    var nextPage = parseInt(window.sessionStorage.getItem(\'contacts_page\')) + 1;\n    window.sessionStorage.setItem(\'contacts_page\', nextPage);\n  }\n\n  console.log(this);\n  $(e).html(\'loading . . .\');\n  get_contact_list(nextPage, \'.contact-list\', function (json, contact_count) {\n    $(e).remove();\n  });\n}\n\nfunction get_groups() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'\';\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n  __ajax_groups(data, function (e) {\n    //success\n    var data = JSON.parse(e);\n    var groups = typeof data.groups != \'undefined\' ? data.groups : []; //show groups\n\n    show_groups(groups, \'.group-list\', callback);\n  }, function () {//failed\n  });\n}\n\nfunction get_groups_modal() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'\';\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n  __ajax_groups(data, function (e) {\n    //success\n    var data = JSON.parse(e);\n    var groups = typeof data.groups != \'undefined\' ? data.groups : []; //show groups\n\n    show_groups_modal(groups, \'.modal-groups\', callback);\n  }, function () {//failed\n  });\n}\n\nfunction show_groups(groups, target) {\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n  var html = \'\'; //groups\n\n  for (var x = 0; x < groups.length; x++) {\n    var author = typeof groups[x].author != \'undefined\' ? groups[x].author : [];\n    var is_public = typeof groups[x].is_public != \'undefined\' ? groups[x].is_public : [];\n    var select = "<select data-current=" + is_public + "><option>YES (Current) </option><option>YES</option><option>NO</option></select> <button type=\\"button\\" class=\\"btn btn-default\\">Save</button>";\n    html += "<div class=\\"col col-md-12 groups\\">\\n\\t\\t\\t\\t\\t<h3>" + groups[x].name.charAt(0).toUpperCase() + \'\' + groups[x].name.substr(1) + "</h3>\\n\\t\\t\\t\\t\\t<p>" + groups[x].description + "</p>\\n\\t\\t\\t\\t\\t<br/>\\n\\t\\t\\t\\t\\t<p><b>Alias :</b> " + groups[x].alias + "</p>"; //change accessibility\n    //html+=`\t<p><b>Accessible to other units :`+select+`</b></p>`\t\n\n    html += "<details><summary>Members <span class=\\"label label-default\\">" + groups[x].total + "</span></summary><br/>"; //members\n\n    for (var y = 0; y < groups[x].members.length; y++) {\n      html += "\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-12 groups phone-book group-members\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-1\\"><div class=\\"media-circles circle-sm\\"><img src=\\"assets/images/user.png\\" width=\\"100%;\\"></div></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-10\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<small style=\\"line-height: 10px;\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><b>" + groups[x].members[y].name + "</b></p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + groups[x].members[y].department + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + groups[x].members[y].position + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><button class=\\"btn btn-danger btn-xs\\" data-membership-id=\\"" + groups[x].members[y].id + "\\" onclick=\\"undelegate_group_member(event,this)\\"><i class=\\"material-icons\\">remove</i> remove</button></p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</small>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\n\\t\\t\\t\\t\\t\\t\\t";\n    } //show more group members\n\n\n    if (groups[x].members.length > 0) html += "<div class=\\"text-center text-muted\\" onclick=\\"show_more_group_members(this)\\" data-group=\\"" + groups[x].id + "\\">Show more</div>";\n    html += "</details></div>";\n  } //show more\n\n\n  html += "<div class=\\"col col-md-12\\"><p class=\\"text-muted text-center\\" onclick=\\"show_more_groups(this)\\">Show more</p></div>"; //append to target\n\n  if (groups.length > 0) $(target).append(html); //callback\t\n\n  callback(this);\n}\n\nfunction show_groups_modal(groups, target) {\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n  var html = \'\';\n  var id = $(window.modal.recentlySelected).attr(\'data-member-id\'); //show groups\n\n  for (var x = 0; x < groups.length; x++) {\n    html += "<div class=\\"col col-md-12\\">\\n      \\t\\t<div class=\\"form-group\\">\\n              <div class=\\"checkbox\\">\\n                <label>\\n                  <input type=\\"checkbox\\" onchange=\\"delegate_group_member(event,this,\'" + groups[x].id + "\'," + id + ")\\"><span class=\\"checkbox-material\\"><span class=\\"check\\"></span></span> " + groups[x].name.charAt(0).toUpperCase() + \'\' + groups[x].name.substr(1) + "\\n                </label>\\n              </div>\\n            </div> \\n      \\t\\t<p>" + groups[x].description + "</p>\\n      \\t</div>\\n\\t\\t";\n  } //show more\n\n\n  html += "<div class=\\"col col-md-12\\"><p class=\\"text-muted text-center\\" onclick=\\"show_more_groups_modal(this)\\">Show more</p></div>"; //append to target\n\n  if (groups.length > 0) $(target).append(html); //callback\t\n\n  callback(this);\n}\n\nfunction delegate_group_member(event, target, group_id, member_id) {\n  console.log(target.checked);\n  var member_id = $(window.modal.recentlySelected).attr(\'data-member-id\');\n  var group_id = group_id; //saved to remote server\n\n  __ajax_group_members_post({\n    group_id: group_id,\n    member_id: member_id,\n    token: __config.session.token\n  }, function (json) {\n    var data = JSON.parse(json);\n\n    if (typeof data.id != \'undefined\') {\n      setTimeout(function () {\n        alert(\'Added successfully!\');\n      }, 600); //remove selected\n\n      $(target.parentNode.parentNode.parentNode.parentNode).fadeOut();\n    } else {\n      alert(\'Unable to add to the group. Contact is not available or it is already member of this group\');\n    }\n  }, function () {\n    alert(\'Unable to add to the group.\');\n  });\n}\n\nfunction undelegate_group_member(event, target) {\n  var group_member_id = $(target).attr(\'data-membership-id\');\n\n  if (confirm(\'Are you sure you want to remove this to the group?\')) {\n    //removed from remote server\n    __ajax_group_members_delete({\n      id: group_member_id,\n      token: __config.session.token\n    }, function (json) {\n      var data = JSON.parse(json);\n\n      if (data.status == 200) {\n        setTimeout(function () {\n          alert(\'Removed successfully!\');\n        }, 600); //remove selected\n\n        $(target.parentNode.parentNode.parentNode.parentNode).fadeOut();\n      } else {\n        alert(\'Unable to remove from group.\');\n      }\n    }, function () {\n      alert(\'Unable to remove from group.\');\n    });\n  }\n}\n\nfunction get_contacts() {\n  var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  __ajax_contacts(\'\', function (e) {\n    //success\n    var data = JSON.parse(e);\n    var contacts = typeof data.contacts != \'undefined\' ? data.contacts : [];\n    var html = "";\n\n    for (var value in contacts) {\n      html += "\\t<div class=\\"col col-md-12 text-muted\\">\\n\\t\\t\\t\\t\\t\\t<h3>" + value + "</h3>\\n\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-12 row\\">";\n\n      for (var x = 0; x < contacts[value].length; x++) {\n        console.log(contacts[value][x]);\n        html += "\\n\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-12 groups phone-book\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-1\\"><div class=\\"media-circles circle-sm\\"><img src=\\"assets/images/user.png\\" width=\\"100%;\\"></div></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"col col-md-10\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<small style=\\"line-height: 10px;\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"dropdown pull-right more-options\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t    <a href=\\"#\\" data-toggle=\\"dropdown\\" class=\\"dropdown-toggle\\"><span><i class=\\"material-icons\\">more_vert</i></span></a>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t    <ul class=\\"dropdown-menu\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t        <li><a href=\\"group_list.html\\" data-member-id=\\"" + contacts[value][x].id + "\\" data-role=\\"none\\" data-toggle=\\"modal\\" data-target=\\"#myModal\\" onclick=\\"modal_ajax(event,this)\\">Add to groups</a></li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t        <li><a href=\\"#\\">Another action</a></li>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t    </ul>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><b>" + contacts[value][x].name + "</b></p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + contacts[value][x].department + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\"text-muted\\">" + contacts[value][x].position + "</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</small>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\x3c!--contacts--\x3e\\t";\n      }\n\n      html += "</div></div>";\n    }\n\n    $(\'.container-contacts\').html(html);\n    callback(e);\n  }, function () {//failed\n  });\n}\n\n//# sourceURL=webpack:///./src/assets/js/groups/functions/functions.groups.js?')}});